<!DOCTYPE html>
<html>
<head>
  <title>Requester</title>
</head>
<body>
<h2>Requester</h2>

<input id="pid" placeholder="Enter Provider ID">
<button id="send">Send Task</button>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
const peer = new Peer(undefined, {
  host: 'localhost',
  port: 9000,
  path: '/p2p'
});

let conn;

document.getElementById("send").onclick = () => {
  const providerID = document.getElementById("pid").value;

  conn = peer.connect(providerID);

  conn.on('open', () => {
    console.log("Connected to provider!");
    conn.send({ task: "sum", numbers: [10, 20, 30] });
  });

  conn.on('data', data => {
    console.log("Result from provider:", data);
    alert("Result: " + data.result);
  });
};
</script>
</body>
</html>
